# WebSCADA Production Environment Configuration
# Copy to .env.development or .env.production and customize

# ============================================
# APPLICATION
# ============================================
NODE_ENV=production
LOG_LEVEL=info
PORT=3001
HOST=0.0.0.0

# ============================================
# POSTGRESQL
# ============================================
DATABASE_URL=postgresql://webscada:CHANGE_ME_PASSWORD@postgres:5432/webscada
POSTGRES_USER=webscada
POSTGRES_PASSWORD=CHANGE_ME_PASSWORD
POSTGRES_DB=webscada
POSTGRES_MAX_CONNECTIONS=20
POSTGRES_IDLE_TIMEOUT=30000

# ============================================
# INFLUXDB 3.0
# ============================================
INFLUXDB_URL=http://influxdb:8086
INFLUXDB_TOKEN=CHANGE_ME_INFLUX_TOKEN
INFLUXDB_ORG=webscada
INFLUXDB_BUCKET_TELEMETRY=telemetry
INFLUXDB_BUCKET_HEALTH=device_health
INFLUXDB_BUCKET_ALARMS=alarms
INFLUXDB_BUCKET_ANALYTICS=analytics

# ============================================
# REDIS
# ============================================
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_DB=0

# ============================================
# MQTT BROKER (Mosquitto)
# ============================================
MQTT_BROKER_HOST=mosquitto
MQTT_BROKER_PORT=1883
MQTT_BROKER_PORT_TLS=8883
MQTT_BROKER_PORT_WS=9001
MQTT_USERNAME=webscada
MQTT_PASSWORD=CHANGE_ME_MQTT_PASSWORD
MQTT_USE_TLS=true

# ============================================
# CHIRPSTACK (LoRaWAN)
# ============================================
CHIRPSTACK_API_URL=http://chirpstack:8080
CHIRPSTACK_GRPC_URL=chirpstack:8090
CHIRPSTACK_API_KEY=CHANGE_ME_CHIRPSTACK_KEY
CHIRPSTACK_APPLICATION_ID=webscada-app
CHIRPSTACK_GATEWAY_BRIDGE_HOST=chirpstack-gateway-bridge
CHIRPSTACK_GATEWAY_BRIDGE_PORT=1700

# ============================================
# JWT AUTHENTICATION
# ============================================
JWT_SECRET=CHANGE_ME_JWT_SECRET_MIN_32_CHARS_RANDOM
JWT_EXPIRES_IN=1h
JWT_REFRESH_SECRET=CHANGE_ME_REFRESH_SECRET_MIN_32_CHARS
JWT_REFRESH_EXPIRES_IN=7d

# ============================================
# CORS
# ============================================
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_GSM_MAX=1000
RATE_LIMIT_LORAWAN_MAX=5000
RATE_LIMIT_MQTT_MAX=2000

# ============================================
# SPARKPLUG B
# ============================================
SPARKPLUG_GROUP_ID=WebSCADA
SPARKPLUG_EDGE_NODE_ID=Gateway
SPARKPLUG_QOS=1

# ============================================
# DATA PIPELINE
# ============================================
PIPELINE_BATCH_SIZE=5000
PIPELINE_FLUSH_INTERVAL=1000
PIPELINE_WORKERS=4
PIPELINE_MAX_LATENCY_MS=100

# ============================================
# ALARMS
# ============================================
ALARM_ENGINE_INTERVAL=5000
ALARM_ENABLE_NOTIFICATIONS=true
ALARM_NOTIFICATION_CHANNELS=email,webhook

# ============================================
# OTA UPDATES
# ============================================
OTA_ENABLED=true
OTA_SERVER_URL=http://ota-service:8080
OTA_FIRMWARE_DIR=/var/lib/webscada/firmware

# ============================================
# SECURITY (IEC 62443)
# ============================================
ENABLE_TLS=true
TLS_CERT_PATH=/etc/ssl/certs/webscada.crt
TLS_KEY_PATH=/etc/ssl/private/webscada.key
TLS_CA_PATH=/etc/ssl/certs/ca.crt
ENABLE_RBAC=true
SESSION_SECRET=CHANGE_ME_SESSION_SECRET_MIN_32_CHARS
SESSION_MAX_AGE=86400000

# ============================================
# MONITORING
# ============================================
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30000

# ============================================
# LOGGING
# ============================================
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/webscada/app.log
LOG_MAX_FILES=10
LOG_MAX_SIZE=10485760

# ============================================
# FRONTEND
# ============================================
NEXT_PUBLIC_API_URL=http://localhost:3001
NEXT_PUBLIC_WS_URL=ws://localhost:3001
NEXT_PUBLIC_MAPBOX_TOKEN=CHANGE_ME_MAPBOX_TOKEN

# ============================================
# EMAIL NOTIFICATIONS (Optional)
# ============================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@webscada.local
SMTP_PASSWORD=CHANGE_ME_SMTP_PASSWORD
SMTP_FROM=WebSCADA <noreply@webscada.local>

# ============================================
# SMS NOTIFICATIONS (Optional)
# ============================================
SMS_PROVIDER=twilio
SMS_ACCOUNT_SID=CHANGE_ME
SMS_AUTH_TOKEN=CHANGE_ME
SMS_FROM_NUMBER=+1234567890

# ============================================
# WEBHOOK NOTIFICATIONS (Optional)
# ============================================
WEBHOOK_TIMEOUT=5000
WEBHOOK_RETRY_ATTEMPTS=3
